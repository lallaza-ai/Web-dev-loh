<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LOH Designs Career Portal</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
    body {
      font-family: 'Inter', sans-serif;
      background-color: #F0FDF4;
      min-height: 100vh;
    }
    .form-card {
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }
    .btn-primary {
      background-image: linear-gradient(to right, #1E40AF, #1D4ED8);
      border: none;
      transition: all 0.3s ease;
    }
    .btn-primary:hover {
      opacity: 0.95;
      transform: translateY(-1px);
      box-shadow: 0 4px 10px rgba(30, 64, 175, 0.3);
    }
    .nav-item.active {
      background-color: #E0F2F2;
      color: #00A3A3;
      font-weight: 600;
    }
    .quote-box {
      border-left: 5px solid #00A3A3;
    }
    .modal {
      transition: all 0.3s ease;
    }
  </style>
</head>
<body class="bg-gray-50">

  <div id="app" class="app-container flex items-center justify-center p-4">
    <header class="absolute top-0 left-0 p-4 w-full">
      <h1 class="text-3xl font-extrabold text-blue-800 tracking-tight">
        LOH<span class="text-gray-600 font-light">Designs</span>
      </h1>
    </header>

    <!-- AUTH SECTION -->
    <div id="authViews" class="w-full max-w-lg">

      <!-- LOGIN VIEW -->
      <div id="loginView" class="view form-card bg-white p-8 md:p-10 rounded-xl">
        <h2 class="text-2xl font-bold mb-6 text-gray-800">Welcome Back</h2>
        <form id="loginForm">
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
            <input type="email" id="loginEmail" class="w-full p-3 border border-gray-300 rounded-lg" required>
          </div>
          <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
            <input type="password" id="loginPassword" class="w-full p-3 border border-gray-300 rounded-lg" required>
          </div>
          <button type="submit" class="btn-primary w-full text-white p-3 rounded-lg font-semibold">Log In</button>
        </form>
        <p id="loginMessage" class="mt-4 text-center text-sm font-medium text-red-600"></p>
        <div class="mt-6 text-center text-sm">
          <a href="#" onclick="showView('registerView')" class="text-blue-700 font-medium">Create account</a> |
          <a href="#" onclick="showView('forgotPasswordView')" class="text-blue-700 font-medium">Forgot password?</a>
        </div>
      </div>

      <!-- REGISTER VIEW -->
      <div id="registerView" class="view form-card bg-white p-8 md:p-10 rounded-xl hidden">
        <h2 class="text-2xl font-bold mb-6 text-gray-800">Create Account</h2>
        <form id="registerForm">
          <div class="mb-3"><label class="block text-sm font-medium text-gray-700 mb-1">Race</label>
            <input type="text" id="registerRace" class="w-full p-3 border border-gray-300 rounded-lg" required></div>
          <div class="mb-3"><label class="block text-sm font-medium text-gray-700 mb-1">Language</label>
            <input type="text" id="registerLanguage" class="w-full p-3 border border-gray-300 rounded-lg" required></div>
          <div class="mb-3"><label class="block text-sm font-medium text-gray-700 mb-1">Address</label>
            <input type="text" id="registerAddress" class="w-full p-3 border border-gray-300 rounded-lg" required></div>
          <div class="mb-3"><label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
            <input type="email" id="registerEmail" class="w-full p-3 border border-gray-300 rounded-lg" required></div>
          <div class="mb-3"><label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
            <input type="password" id="registerPassword" class="w-full p-3 border border-gray-300 rounded-lg" required></div>
          <button type="submit" class="btn-primary w-full text-white p-3 rounded-lg font-semibold">Register</button>
        </form>
        <p id="registerMessage" class="mt-4 text-center text-sm font-medium text-red-600"></p>
        <div class="mt-4 text-center text-sm">
          Already registered? <a href="#" onclick="showView('loginView')" class="text-blue-700 font-medium">Login</a>
        </div>
      </div>

      <!-- FORGOT PASSWORD -->
      <div id="forgotPasswordView" class="view form-card bg-white p-8 md:p-10 rounded-xl hidden">
        <h2 class="text-2xl font-bold mb-6 text-gray-800">Reset Password</h2>
        <form id="forgotForm">
          <label class="block text-sm font-medium text-gray-700 mb-1">Enter your email</label>
          <input type="email" id="forgotEmail" class="w-full p-3 border border-gray-300 rounded-lg" required>
          <button type="submit" class="btn-primary w-full text-white p-3 rounded-lg font-semibold mt-4">
            Send Reset Link
          </button>
        </form>
        <p id="forgotMessage" class="mt-4 text-center text-sm font-medium text-green-600"></p>
        <div class="mt-4 text-center text-sm">
          <a href="#" onclick="showView('loginView')" class="text-blue-700 font-medium">Back to Login</a>
        </div>
      </div>
    </div>

    <!-- DASHBOARD -->
    <div id="dashboardView" class="view hidden w-full max-w-6xl pt-20 pb-8">
      <button onclick="logout()" class="absolute top-4 right-4 bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-lg">
        Logout
      </button>
      <div class="flex flex-col md:flex-row">
        <nav class="w-full md:w-64 bg-white p-6 rounded-xl shadow-lg mb-4 md:mb-0 md:mr-4">
          <h2 class="text-lg font-bold text-gray-800 mb-4 border-b pb-2">Menu</h2>
          <ul class="space-y-2">
            <li><a href="#" onclick="showSection('home')" class="nav-item p-2 rounded-lg block">Home</a></li>
            <li><a href="#" onclick="showSection('upload')" class="nav-item p-2 rounded-lg block">CV Upload</a></li>
            <li><a href="#" onclick="showSection('profile')" class="nav-item p-2 rounded-lg block">Profile</a></li>
          </ul>
        </nav>

        <main class="flex-1 bg-white p-6 rounded-xl shadow-lg">
          <h1 class="text-3xl font-bold text-gray-900 mb-4" id="sectionTitle">Home</h1>

          <!-- HOME SECTION -->
          <div id="section-home" class="section">
            <p class="text-gray-700">Welcome to your LOH Designs Career Portal dashboard ðŸŽ‰</p>
          </div>

          <!-- CV UPLOAD SECTION -->
          <div id="section-upload" class="section hidden">
            <form id="cvForm" enctype="multipart/form-data">
              <label class="block text-sm font-medium text-gray-700 mb-2">Upload your CV</label>
              <input type="file" id="cvFile" name="cv" class="w-full border p-2 rounded mb-4" accept=".pdf,.doc,.docx" required>
              <button type="submit" class="btn-primary text-white p-3 rounded-lg font-semibold w-full">Upload</button>
            </form>
            <p id="cvMessage" class="mt-4 text-sm font-medium text-green-600"></p>
          </div>

          <!-- PROFILE SECTION -->
          <div id="section-profile" class="section hidden">
            <p><strong>Email:</strong> <span id="profileEmail"></span></p>
            <p><strong>Race:</strong> <span id="profileRace"></span></p>
            <p><strong>Language:</strong> <span id="profileLanguage"></span></p>
            <p><strong>Address:</strong> <span id="profileAddress"></span></p>
          </div>
        </main>
      </div>
    </div>
  </div>

  <!-- MODAL POPUP -->
  <div id="modal" class="fixed inset-0 hidden bg-black bg-opacity-40 items-center justify-center">
    <div class="bg-white rounded-xl shadow-lg p-6 max-w-sm text-center modal scale-95">
      <h2 id="modalTitle" class="text-2xl font-bold text-blue-700 mb-2">Success!</h2>
      <p id="modalMessage" class="text-gray-700 mb-4">Action completed successfully.</p>
      <button onclick="closeModal()" class="btn-primary text-white px-4 py-2 rounded-lg">Close</button>
    </div>
  </div>

  <script>
    const API_BASE = "https://web-dev-loh.onrender.com";

    function showView(viewId) {
      document.querySelectorAll('.view').forEach(v => v.classList.add('hidden'));
      document.getElementById(viewId).classList.remove('hidden');
    }

    function showSection(name) {
      document.querySelectorAll('.section').forEach(s => s.classList.add('hidden'));
      document.getElementById(`section-${name}`).classList.remove('hidden');
      document.getElementById('sectionTitle').innerText = name.charAt(0).toUpperCase() + name.slice(1);
    }

    function showModal(title, message) {
      document.getElementById("modalTitle").innerText = title;
      document.getElementById("modalMessage").innerText = message;
      document.getElementById("modal").classList.remove("hidden");
      document.getElementById("modal").classList.add("flex");
    }

    function closeModal() {
      document.getElementById("modal").classList.add("hidden");
      document.getElementById("modal").classList.remove("flex");
    }

    // REGISTER
    document.getElementById("registerForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const data = {
        email: registerEmail.value,
        password: registerPassword.value,
        race: registerRace.value,
        language: registerLanguage.value,
        address: registerAddress.value
      };
      const res = await fetch(`${API_BASE}/register`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });
      const result = await res.json();
      if (result.success) {
        showModal("Registration Successful", "Welcome to LOH Designs! You can now log in.");
        showView("loginView");
      } else {
        document.getElementById("registerMessage").innerText = result.message;
      }
    });

    // LOGIN
    document.getElementById("loginForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const data = { email: loginEmail.value, password: loginPassword.value };
      const res = await fetch(`${API_BASE}/login`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });
      const result = await res.json();
      document.getElementById("loginMessage").innerText = result.message;
      if (result.success) {
        localStorage.setItem("userEmail", data.email);
        showModal("Login Successful", "Welcome back!");
        showDashboard(data.email);
      }
    });

    function showDashboard(email) {
      showView("dashboardView");
      showSection("home");
      profileEmail.innerText = email;
      profileRace.innerText = "â€”";
      profileLanguage.innerText = "â€”";
      profileAddress.innerText = "â€”";
    }

    async function logout() {
      await fetch(`${API_BASE}/logout`, { method: "POST" });
      localStorage.removeItem("userEmail");
      showModal("Logged Out", "You have been successfully logged out.");
      showView("loginView");
    }

    // FORGOT PASSWORD
    document.getElementById("forgotForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const email = forgotEmail.value;
      const res = await fetch(`${API_BASE}/forgot-password`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ email })
      });
      const result = await res.json();
      showModal("Password Reset", result.message);
    });

    // CV UPLOAD
    document.getElementById("cvForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData();
      formData.append("cv", cvFile.files[0]);
      const res = await fetch(`${API_BASE}/upload-cv`, { method: "POST", body: formData });
      const result = await res.json();
      showModal("CV Upload", result.message);
    });
  </script>
</body>
</html>
